<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
		<!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'">-->
        <title>demo</title>
    </head>
    <body>
        <div>
            <input id="play" type="button" value="play"/>
            <input id="pause" type="button" value="pause"/>
            <input id="continue" type="button" value="continue"/>
            <input id="stop" type="button" value="stop"/>
            <input id="capture" type="button" value="capture"/>
            <br/>
            <canvas id="testCanvas" style="background-color:#000;width:600px;height:300px;"></canvas>
            <div>
                <video id="testVideo" style="background-color:#000;width:600px;height:300px;"></video>
            </div>
        </div>
    </body>
    <script src="module/playerControl.js"></script>
    <script>
        var player = null;
        var canvas = document.getElementById('testCanvas');
        var video = document.getElementById('testVideo');
        document.getElementById('stop').onclick = function(){
            player && player.close();
        }
        document.getElementById('pause').onclick = function(){
            player && player.pause();
        }
        document.getElementById('continue').onclick = function(){
            player && player.play();
        }
        
        document.getElementById('capture').onclick = function(){
            player && player.capture('picName');
        }
        document.getElementById('play').onclick = function(){
            var options = {
                wsURL: 'ws://172.28.6.14/rtspoverwebsocket',
                rtspURL: 'rtsp://172.28.6.14/cam/realmonitor?channel=1&subtype=0&proto=Private3',
                username: 'admin',
                password: 'admin123',
				h265AccelerationEnabled: true
            };
            player = new PlayerControl(options);
            player.on('WorkerReady', function(){
                player.connect();  
            });
            player.on('DecodeStart', function(rs){
                console.log('start decode');
                console.log(rs);

            });
            player.on('PlayStart', function(rs){
                console.log('play');
                console.log(rs);
            });
            player.on('Error', function(rs){
                console.log('error');
                console.log(rs);
            });
            player.on('FileOver', function(rs){
                console.log('recorder play over');
                console.log(rs);
            });
            player.on('MSEResolutionChanged', function(rs){
                console.log('resolution  changed');
                console.log(rs);
            });
            player.on('FrameTypeChange', function(rs){
                console.log('video encode mode changed');
                console.log(rs);
            });
            player.on('audioChange', function(rs){
                console.log('audio encode changed');
                console.log(rs);
            });
            player.init(canvas, video);
        }

    </script>
</html>