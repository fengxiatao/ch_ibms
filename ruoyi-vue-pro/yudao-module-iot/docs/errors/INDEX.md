# IoT 模块错误记录索引

本索引记录了 IoT 模块开发过程中遇到的所有重要错误及其解决方案，用于知识积累和问题排查。

---

## 📋 错误分类

### 🔴 编译错误（Compilation Errors）

| 错误类型 | 文档 | 状态 | 影响范围 |
|---------|------|------|---------|
| - | - | - | - |

### 🟠 运行时错误（Runtime Errors）

| 错误类型 | 文档 | 状态 | 影响范围 |
|---------|------|------|---------|
| Spring Bean 注入冲突 | [后端_Spring启动失败_WebSocket_Bean注入冲突.md](./后端_Spring启动失败_WebSocket_Bean注入冲突.md) | ✅ 已修复 | 设备发现消息消费 |
| 多租户上下文缺失（Service层） | [后端_多租户上下文缺失_RocketMQ消费者租户拦截错误.md](./后端_多租户上下文缺失_RocketMQ消费者租户拦截错误.md) | ✅ 已修复 | RocketMQ消费者、设备发现 |
| 多租户上下文缺失（Mapper层）⭐ | [后端_多租户上下文缺失_Mapper级别拦截错误.md](./后端_多租户上下文缺失_Mapper级别拦截错误.md) | ✅ 已修复 | 数据库操作、根本原因 |

### 🟡 配置错误（Configuration Errors）

| 错误类型 | 文档 | 状态 | 影响范围 |
|---------|------|------|---------|
| RocketMQ Topic 命名不合规 | [../RocketMQ_Topic命名紧急修正说明.md](../RocketMQ_Topic命名紧急修正说明.md) | ✅ 已修复 | 所有消息通信 |

### 🔵 数据库错误（Database Errors）

| 错误类型 | 文档 | 状态 | 影响范围 |
|---------|------|------|---------|
| 表不存在 | [后端_数据库表不存在_设备发现和消息幂等性表.md](./后端_数据库表不存在_设备发现和消息幂等性表.md) | ✅ 已修复 | 设备发现、消息幂等性 |

### 🟣 网络错误（Network Errors）

| 错误类型 | 文档 | 状态 | 影响范围 |
|---------|------|------|---------|
| - | - | - | - |

---

## 🔍 快速查找

### 按关键词查找

- **WebSocket**: [后端_Spring启动失败_WebSocket_Bean注入冲突](./后端_Spring启动失败_WebSocket_Bean注入冲突.md)
- **Bean 注入**: [后端_Spring启动失败_WebSocket_Bean注入冲突](./后端_Spring启动失败_WebSocket_Bean注入冲突.md)
- **RocketMQ Topic**: [RocketMQ_Topic命名紧急修正说明](../RocketMQ_Topic命名紧急修正说明.md)
- **表不存在**: [后端_数据库表不存在_设备发现和消息幂等性表](./后端_数据库表不存在_设备发现和消息幂等性表.md)
- **SQL 错误**: [后端_数据库表不存在_设备发现和消息幂等性表](./后端_数据库表不存在_设备发现和消息幂等性表.md)
- **多租户**: [后端_多租户上下文缺失_RocketMQ消费者租户拦截错误](./后端_多租户上下文缺失_RocketMQ消费者租户拦截错误.md)
- **租户上下文**: [后端_多租户上下文缺失_RocketMQ消费者租户拦截错误](./后端_多租户上下文缺失_RocketMQ消费者租户拦截错误.md)
- **@TenantIgnore**: [后端_多租户上下文缺失_RocketMQ消费者租户拦截错误](./后端_多租户上下文缺失_RocketMQ消费者租户拦截错误.md)

### 按模块查找

#### Gateway 模块
- RocketMQ Topic 命名不合规

#### Biz 模块
- Spring Bean 注入冲突（DeviceDiscoveredConsumer）
- 多租户上下文缺失（MessageIdempotentServiceImpl、DiscoveredDeviceServiceImpl）

#### Core 模块
- RocketMQ Topic 命名不合规（IotMessageTopics）

---

## 📊 统计信息

- **总错误数**: 5
- **已修复**: 5
- **待修复**: 0
- **已验证**: 1（需要重启验证最新修复）

---

## 📝 添加新错误记录的步骤

1. **创建错误文档**
   - 在 `docs/errors/` 目录下创建新文档
   - 命名格式：`模块_错误类型_简短描述.md`

2. **文档内容结构**
   ```markdown
   # 错误标题
   
   ## 错误信息
   [错误堆栈、日志]
   
   ## 错误原因
   [详细分析]
   
   ## 解决方案
   [步骤详解]
   
   ## 涉及文件
   [文件列表]
   
   ## 预防措施
   [如何避免]
   
   ## 相关错误
   [相关链接]
   ```

3. **更新索引**
   - 在本文件中添加错误记录
   - 按分类归档
   - 更新统计信息

4. **关联文档**
   - 在相关最佳实践文档中引用
   - 在设计文档中添加注意事项

---

## 🔗 相关资源

- [IoT 模块文档中心](../README.md)
- [最佳实践](../best-practices/)
- [架构设计](../architecture/)

---

**最后更新**: 2025-10-27  
**维护团队**: 长辉信息科技有限公司

