@echo off
chcp 65001 >nul
cd /d "%~dp0"

echo ================================================================================
echo 修复物模型并重新导入
echo ================================================================================
echo.
echo 当前目录: %cd%
echo.
echo 此脚本将:
echo   1. 清理旧的物模型数据
echo   2. 重新导入物模型TSL
echo.
pause

echo.
echo ================================================================================
echo [1/2] 清理旧数据
echo ================================================================================
python clear_and_reimport_thing_model.py
if errorlevel 1 (
    echo [ERROR] 清理失败
    pause
    exit /b 1
)

echo.
echo ================================================================================
echo [2/2] 重新导入
echo ================================================================================
python import_thing_model_tsl.py
if errorlevel 1 (
    echo [ERROR] 导入失败
    pause
    exit /b 1
)

echo.
echo ================================================================================
echo 修复完成！
echo ================================================================================
echo.
echo 下一步:
echo   1. 前端: 智慧物联 -^> 产品管理 -^> 网络摄像头(枪机)
echo   2. 点击"撤销发布"再点击"发布"
echo   3. 查看后端日志应显示: 超级表创建成功，字段数量: 12
echo.
pause

















